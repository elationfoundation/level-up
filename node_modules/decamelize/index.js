'use strict';
<<<<<<< HEAD
=======
var escapeStringRegexp = require('escape-string-regexp');

>>>>>>> 16a22f1a2827e4eddfc089d7e2423b046879a4ce
module.exports = function (str, sep) {
	if (typeof str !== 'string') {
		throw new TypeError('Expected a string');
	}

	sep = typeof sep === 'undefined' ? '_' : sep;

<<<<<<< HEAD
	return str
		.replace(/([a-z\d])([A-Z])/g, '$1' + sep + '$2')
		.replace(/([A-Z]+)([A-Z][a-z\d]+)/g, '$1' + sep + '$2')
		.toLowerCase();
=======
	var reSep = escapeStringRegexp(sep);

	return str.replace(/([a-z\d])([A-Z])/g, '$1' + sep + '$2')
					.replace(new RegExp('(' + reSep + '[A-Z])([A-Z])', 'g'), '$1' + reSep + '$2')
					.toLowerCase();
>>>>>>> 16a22f1a2827e4eddfc089d7e2423b046879a4ce
};
